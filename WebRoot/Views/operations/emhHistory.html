<!DOCTYPE html>
<html>
<head>
    <title>环控历史数据</title>
    <meta name="keywords" content="keyword1,keyword2,keyword3">
    <meta name="description" content="this is my page">
    <!-- <meta http-equiv="refresh" content="100;url=/xhweb/Views/gps/gps.html"> -->
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta http-equiv="X-UA-Compatible" content="IE=9"/>
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Cache-Control" content="no-cache">
    <meta http-equiv="Expires" content="-1">
    <script type="text/javascript"
            src="../../Resources/js/xhbootstrap-css.js"></script>
    <!--[if lte IE 9]>
    <script src="../../Resources/js/jquery-1.8.3.min.js"></script>
    <script src="../../Resources/js/respond.min.js"></script>
    <script src="../../Resources/js/html5shiv.js"></script>
    <![endif]-->
</head>
<body ng-app="app" ng-controller="emhHistory" class="fixed-iframe">
<!-- splash screen-->
<div class="splash">
    <div class="splash-title">
        <h1>系统正在努力加载中，请耐心等待</h1>
        <div class="spinner">
            <div class="rect1"></div>
            <div class="rect2"></div>
            <div class="rect3"></div>
            <div class="rect4"></div>
            <div class="rect5"></div>
        </div>
    </div>
</div>
<!-- 中间内容体 -->
<div id="wrapper">
    <div class="small-header transition animated fadeIn">
        <div class="title-panel">
            <div class="panel-body">
                <div id="hbreadcrumb" class="pull-left">
                    <ol class="hbreadcrumb breadcrumb">
                        <li><span>当前位置：</span></li>
                        <li><span>业务管理</span></li>
                        <li><span>数据管理</span></li>
                        <li><span>业务数据</span></li>
                        <li class="active"><span>环控历史数据</span></li>
                    </ol>
                </div>
            </div>
        </div>
    </div>
    <div class="content animate-panel">
        <!-- row -->
        <div class="row">
            <div class="col-md-12">
                <!-- row -->
                <div class="row">
                    <div class="col-md-3">
                        <div class="hpanel">
                            <div class="panel-heading hbuilt">
                                <div class="panel-tools">
                                    <a class="showhide"><i class="fa fa-chevron-up"></i></a> <a
                                        class="closebox"><i class="fa fa-times"></i></a>
                                </div>
                                <i class="fa fa-search"></i> 查询
                            </div>
                            <div class="panel-body">
                                <div id="search-div">
                                    <form class="form-inline" role="form">
                                        <div class="form-group">
                                            <div>
                                                <input type="text" class="form-control" id="bsId" width="20px" ng-blur="changePeriod()"
                                                       placeholder="基站ID">
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div>
                                                <select class="form-control" id="period"  name="period" style="width:158px;">
                                                    <option value="4" >四期</option>
                                                    <option value="3" >三期</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div>
                                                <input type="text" class="form-control" id="startTime"
                                                       onfocus="WdatePicker({dateFmt:'yyyy-MM-dd HH:mm:ss'})"
                                                       placeholder="起始时间">
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div>
                                                <input type="text" class="form-control" id="endTime"
                                                       onfocus="WdatePicker({dateFmt:'yyyy-MM-dd HH:mm:ss'})"
                                                       placeholder="结束时间">
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div>
                                                <select class="form-control" id="deviceType"  name="deviceType" style="width:158px;">
                                                    <option value="00211001" >温度(三期)</option>
                                                    <option value="00211002" >湿度(三期)</option>
                                                    <option value="00111001" >烟感(三期)</option>
                                                    <option value="00111002" >门禁(三期)</option>
                                                    <option value="00111003" >漏水(三期)</option>
                                                    <option value="00111004" >消防(三期)</option>
                                                    <option value="00511001" >直流电压(三期)</option>
                                                    <option value="00511002" >直流电流(三期)</option>
                                                    <option value="00511003" >交流电压(三期)</option>
                                                    <option value="00511004" >交流电流(三期)</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-xs-4" style="padding-right: 0;">
                                                <input type="text" class="form-control" id="startUps1" style="width: 100%!important;" placeholder="输入电压min">
                                            </div>
                                            <div class="col-xs-1" style="padding: 0;margin: 0;">
                                                ~
                                            </div>
                                            <div class="col-xs-4" style="padding-left: 0;padding-right: 0;">
                                                <input type="text" class="form-control" id="endUps1" style="width: 100%!important;" placeholder="输入电压max">
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-xs-4" style="padding-right: 0;">
                                                <input type="text" class="form-control" id="startUps4" style="width: 100%!important;" placeholder="电池电压min">
                                            </div>
                                            <div class="col-xs-1" style="padding: 0;margin: 0;">
                                                ~
                                            </div>
                                            <div class="col-xs-4" style="padding-left: 0;padding-right: 0;">
                                                <input type="text" class="form-control" id="endUps4" style="width: 100%!important;" placeholder="电池电压max">
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-xs-4" style="padding-right: 0;">
                                                <input type="text" class="form-control" id="startE1" style="width: 100%!important;" placeholder="电表电压min">
                                            </div>
                                            <div class="col-xs-1" style="padding: 0;margin: 0;">
                                                ~
                                            </div>
                                            <div class="col-xs-4" style="padding-left: 0;padding-right: 0;">
                                                <input type="text" class="form-control" id="endE1" style="width: 100%!important;" placeholder="电表电压max">
                                            </div>
                                        </div>
                                        <br>
                                        <div class="form-group">
                                            <div class="col-sm-offset-2" style="padding-top:22px">
                                                <button type="submit" class="btn btn-sm btn-success"
                                                        ng-click="search(1)">
                                                    <i class="fa fa-search"></i>&nbsp;&nbsp;查询
                                                </button>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="col-sm-offset-2" style="padding-top:22px">
                                                <button class="btn btn-warning btn-sm" ng-click="refresh()">
                                                    <i class="fa fa-refresh"></i>&nbsp;刷新
                                                </button>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="col-sm-offset-2" style="padding-top:22px">
                                                <button class="btn btn-success btn-sm" ng-click="showAddModel()">
                                                    <i class="fa fa-refresh"></i>&nbsp;点击导出
                                                </button>
                                            </div>
                                        </div>
                                        <div class="form-group" ng-if="roleId!=10002">
                                            <div class="col-sm-offset-2" style="padding-top:22px">
                                                <button class="btn btn-success btn-sm" ng-click="analysisPowerOff()">
                                                    <i class="fa fa-refresh"></i>&nbsp;停电分析
                                                </button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                                <!-- row -->


                            </div>
                        </div>
                    </div>

                    <div class="col-md-9">
                        <div class="col-md-12">
                            <div class="hpanel">
                                <div class="panel-heading hbuilt">
                                    <span>统计图</span>
                                </div>
                                <div class="panel-body" id="leftChoose">
                                    <div id="alarmPie"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12">
                        <div class="hpanel">
                            <div class="panel-heading hbuilt">
                                <div class="panel-tools">
                                    <a class="showhide"><i class="fa fa-chevron-up"></i></a> <a
                                        class="closebox"><i class="fa fa-times"></i></a>
                                </div>
                                属性
                            </div>
                            <div class="panel-body">

                                <!-- row -->
                                <div ng-if="bsPeriod == 4">
                                    <table id="tb-info" class="xh-table table-hover">
                                    <thead>
                                    <tr class="tr-gray">
                                        <th>基站ID</th>
                                        <th>名称</th>
                                        <th>水浸</th>
                                        <th>烟雾</th>
                                        <th>红外</th>
                                        <th>门磁</th>
                                        <th>温度</th>
                                        <th>湿度</th>
                                        <th>输入电压(V)</th>
                                        <th>输出电压(V)</th>
                                        <th>输出频率(Hz)</th>
                                        <th>电池组电压(V)</th>
                                        <th>电表电压(V)</th>
                                        <th>电流(A)</th>
                                        <th>功率因数</th>
                                        <th>度数(KWH)</th>
                                        <th>频率(Hz)</th>
                                        <th>时间</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr ng-if="totals==0">
                                        <td colspan="17" class="text-center">没有记录！</td>
                                    </tr>
                                    <tr ng-repeat="x in data">
                                        <td>{{x.bsId}}</td>
                                        <td>{{x.name}}</td>
                                        <td>{{x.water | upp}}</td>
                                        <td>{{x.smoke | upp}}</td>
                                        <td>{{x.red | upp}}</td>
                                        <td>{{x.door | upp}}</td>
                                        <td>{{x.temp | upp}}</td>
                                        <td>{{x.damp | upp}}</td>
                                        <td>{{x.ups1 | upp}}</td>
                                        <td>{{x.ups2 | upp}}</td>
                                        <td>{{x.ups3 | upp}}</td>
                                        <td>{{x.ups4 | upp}}</td>
                                        <td>{{x.e1 | upp}}</td>
                                        <td>{{x.e2 | upp}}</td>
                                        <td>{{x.e3 | upp}}</td>
                                        <td>{{x.e4 | upp}}</td>
                                        <td>{{x.e5 | upp}}</td>
                                        <td>{{x.createTime}}</td>
                                    </tr>
                                    </tbody>
                                </table>
                                    <div class="page">
                                    <div class="page-info">
                                        每页显示 <select id="page-limit" ng-change="refresh()"
                                                     ng-model="count">
                                        <option value="15">15</option>
                                        <option value="20">20</option>
                                        <option value="30">30</option>
                                        <option value="40">40</option>
                                        <option value="50">50</option>
                                    </select> 条, <span ng-model="index">显示{{start}}-</span><span
                                            ng-model="lastIndex">{{lastIndex}}条,</span> <span
                                            ng-model="totals">总计{{totals}}条</span>
                                    </div>
                                    <div class="page-paging"></div>
                                </div>
                                </div>

                                <div ng-if="bsPeriod == 3">
                                    <table id="tb-info" class="xh-table table-hover">
                                        <thead>
                                        <tr class="tr-gray">
                                            <th>基站ID</th>
                                            <th>名称</th>
                                            <th>设备名称</th>
                                            <th>监测类型</th>
                                            <th>测量值</th>
                                            <th>更新时间</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr ng-if="totals==0">
                                            <td colspan="6" class="text-center">没有记录！</td>
                                        </tr>
                                        <tr ng-repeat="x in data">
                                            <td>{{x.bsId}}</td>
                                            <td>{{x.name}}</td>
                                            <td>{{x.DevName}}</td>
                                            <td>{{x.NodeAttribute}}</td>
                                            <td>{{x.value}}</td>
                                            <td>{{x.updateTime}}</td>
                                        </tr>
                                        </tbody>
                                    </table>
                                    <div class="page">
                                        <div class="page-info">
                                            每页显示 <select id="page-limit" ng-change="refresh()"
                                                         ng-model="count">
                                            <option value="15">15</option>
                                            <option value="20">20</option>
                                            <option value="30">30</option>
                                            <option value="40">40</option>
                                            <option value="50">50</option>
                                        </select> 条, <span ng-model="index">显示{{start}}-</span><span
                                                ng-model="lastIndex">{{lastIndex}}条,</span> <span
                                                ng-model="totals">总计{{totals}}条</span>
                                        </div>
                                        <div class="page-paging"></div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- row/ -->
</div>
<!-- 中间内容体 /-->
<div class="scroll-top text-info animated fadeIn scroll-top-hide">
    <i class="fa fa-chevron-circle-up fa-3x"></i>
</div>
<div ng-include="'emhHistory-export.html'"></div>

<div class="scroll-top text-info animated fadeIn scroll-top-hide">
    <i class="fa fa-chevron-circle-up fa-3x"></i>
</div>
<script type="text/javascript"
        src="../../Resources/js/xhbootstrap-js.js"></script>
<script type="text/javascript"
        src="../../lib/metisMenu/dist/metisMenu.min.js"></script>
<script type="text/javascript" src="../../lib/echarts3.0/echarts.min.js"></script>
<script type="text/javascript"
        src="../../Controllers/operations/emhHistory.js"></script>
<script type="text/javascript">
    xh.load();
</script>
</body>
</html>
