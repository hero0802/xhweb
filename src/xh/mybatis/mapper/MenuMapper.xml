<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="xh.mybatis.mapper.MenuMapper">

<!-- 菜单列表 -->
	<select id="menuList" parameterType="int" resultType="map"
		useCache="true">
		select * from xhgmnet_web_role_menu where pId=#{pId}
		order by id asc,morder asc limit 30
	</select>
	<!-- 获取菜单子项 -->
	<select id="menuChild" parameterType="map" resultType="map"
		useCache="true">
		select id,pId,name,url,checked,roleId from xhgmnet_web_role_menu where pId=#{pId} and roleId=#{roleId}
		order by id asc,morder asc limit 50
	</select>
	<!-- 新增工作记录 -->
	<insert id="addwork" useGeneratedKeys="true" keyProperty="id"
		parameterType="xh.mybatis.bean.WorkBean">
		insert into xhgmnet_operations_work(fileName,contact,tel,note,status,filePath,uploadUser,createtime)
		values(#{fileName},#{contact},#{tel},#{note},#{status},#{filePath},#{uploadUser},#{createtime})
	</insert>
	<!-- 更新 -->
    <update id="updateMenu" parameterType="map">     
     update xhgmnet_web_role_menu set checked=#{checked} where id=#{id} and roleId=#{roleId}    
    </update>














</mapper>