<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org/DTD Mapper 3.0" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="xh.mybatis.mapper.ElecGenerationMapper">
	<select id="list" parameterType="map" resultType="map">
		select
		bsId,time,faultRecoveryTime,location,alarmTag,iselec from
		xhgmnet_operations_bsfault where sysType=2 and modType=3000
		and(subModType=80200000000001 or (subModType=51 and subModId=1003))
		
		<if test="bsId!=null and bsId!=''">
			and bsId=#{bsId}
		</if>
		<if test="starttime!=null and starttime!=''">
			and date_format(time,'%Y-%m-%d')>#{starttime}
		</if>
		<if test="endtime!=null and endtime!=''">
			and date_format(time,'%Y-%m-%d') &lt;#{endtime}
		</if>
		order by time desc LIMIT #{start},#{limit}
	</select>
	<select id="count" parameterType="map" resultType="int">
		select
		count(*) from xhgmnet_operations_bsfault where sysType=2 and
		modType=3000
		and(subModType=80200000000001 or (subModType=51 and
		subModId=1003))
		  <if test="bsId!=null and bsId!=''">
            and bsId=#{bsId}
        </if>
        <if test="starttime!=null and starttime!=''">
            and date_format(time,'%Y-%m-%d')>#{starttime}
        </if>
        <if test="endtime!=null and endtime!=''">
            and date_format(time,'%Y-%m-%d') &lt;#{endtime}
        </if>
	</select>
</mapper>
