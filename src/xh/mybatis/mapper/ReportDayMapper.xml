<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org/DTD Mapper 3.0" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="xh.mybatis.mapper.ReportDayMapper">

	<select id="chart_server" resultType="map" useCache="true">
		select
		server_name as name,ip,cpuLoad,
		memSize/(1024*1024*1024) as memSize,
		memUsed/(1024*1024*1024) as memUsed,
		ROUND(memUsed/memSize*100,0) as
		memPercent,
		ROUND(diskUsed/(1024*1024*1024),2) as diskUsed,
		ROUND((diskSize-diskUsed)/(1024*1024*1024),2) as diskSize,
		ID
		from
		xhgmnet_eastcom_server
	</select>
	<select id="chart_dispatch" resultType="xh.mybatis.bean.ChartReportDispatch"
		useCache="true">
		select dstId,dstName,IP as ip,flag,setupStatus from
		xhgmnet_dispatch order
		by dstId asc
	</select>

	<select id="chart_alarm_now" resultType="map" useCache="true">
		select
		COUNT(severity) as num,severity from xhgmnet_eastcom_alarminfo where
		`status`!=1 GROUP BY severity
	</select>
	<select id="chart_alarm_his" parameterType="map" resultType="map"
		useCache="true">
	 <![CDATA[  
	 select COUNT(severity) as num,severity from xhgmnet_eastcom_alarminfo  
     where `status`=1 and DATE_FORMAT(`time`,'%Y-%m-%d')=#{time} GROUP BY severity
      ]]>
	</select>

<!--     按天查询基站呼叫统计信息 -->
	<select id="chart_bs_imp_call" resultType="xh.mybatis.bean.ChartReportImpBsBean" useCache="true" parameterType="String">
		SELECT
		bsid,
		TotalActiveCalls,
		TotalActiveCallDuration,
		starttime
		FROM
		chart_day_bstotal
		WHERE
		starttime = #{time} and bsid in (select bsId from
		xhgmnet.xhgmnet_bs_important)
	</select>

</mapper>
